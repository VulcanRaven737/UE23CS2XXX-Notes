# A Comprehensive Guide to SQL Fundamentals: Data Definition, Constraints, and Manipulation

### Introduction

Structured Query Language (SQL) is the standard language for managing and manipulating data held in a relational database management system. Born out of research at IBM, its power and relative simplicity are major reasons for the commercial success of relational databases. This document provides a comprehensive overview of the foundational components of SQL, broken down into three core areas: Data Definition Language (DDL) for creating and managing the database structure, SQL Constraints for ensuring the accuracy and reliability of the data, and Data Manipulation Language (DML) for interacting with the data itself.

--------------------------------------------------------------------------------

## 1.0 The SQL Language Framework

### 1.1 Unpacking the Core SQL Categories

To effectively wield SQL, it is crucial to understand its command structure. SQL is not a single, monolithic language but rather a collection of sub-languages, each designed for a distinct purpose. By categorizing commands, database professionals can approach tasks with greater precision, whether they are architecting a new database, managing user permissions, or querying for specific information. The primary categories are Data Definition Language (DDL), Data Manipulation Language (DML), Data Control Language (DCL), and Transaction Control Language (TCL).

The table below outlines these fundamental categories and their respective functions.

|   |   |
|---|---|
|Language Category|Primary Function|
|**Data Definition Language (DDL)**|Used to define and manage the database structure or schema.|
|**Data Manipulation Language (DML)**|Used for managing and interacting with the data within schema objects.|
|**Data Control Language (DCL)**|Used to control access and permissions to the database.|
|**Transaction Control Language (TCL)**|Used to manage the changes made by DML statements.|

This guide will now proceed with a detailed exploration of the Data Definition Language (DDL), the cornerstone of database creation.

--------------------------------------------------------------------------------

## 2.0 Defining Database Structure: The Data Definition Language (DDL)

### 2.1 Introduction to DDL and Schema Concepts

The Data Definition Language (DDL) commands serve as the architectural blueprint for a database. These commands are used to create, modify, and delete the database objects that hold and structure the data, such as tables, views, and schemas. They are the first step in building a robust and organized data repository.

An SQL **schema** is a named collection of database objects, including tables, constraints, and views. It is identified by a name and includes an authorization identifier that designates the owner. In standard SQL, every statement must end with a semicolon (`;`).

The `CREATE SCHEMA` command is used to define a new schema. While the standard syntax can include an authorization clause, different database systems implement it in unique ways. In MySQL, for example, `CREATE SCHEMA` is a synonym for `CREATE DATABASE`, simplifying the process.

**MySQL Syntax:**

```sql
CREATE SCHEMA Library;
```

### 2.2 Deconstructing SQL Attribute Data Types

Selecting the correct data type for each attribute (column) is a critical step in database design. The choice of data type directly impacts storage efficiency, query performance, and, most importantly, data integrity by ensuring that only appropriate data is stored in a column. SQL supports a variety of built-in data types, which can be grouped into several categories.

#### 2.2.1 Numeric Data Types

These types are used for storing numerical information.

- `**INTEGER**` or `**INT**`: Used for whole numbers.
- `**SMALLINT**`: A smaller integer type that consumes less storage space, suitable for numbers within a more limited range.
- `**FLOAT**` or `**REAL**`: Used for floating-point numbers (numbers with a decimal point).
- `**DOUBLE PRECISION**`: A higher-precision floating-point number type.
- `**NUMERIC(p,d)**`: A fixed-point number with a user-specified precision. `p` is the total number of digits, and `d` is the number of digits after the decimal point. For example, `numeric(3,1)` can precisely store `44.5`, but not `444.5` or `0.32`.
- `**FLOAT(n)**`: A floating-point number with a precision of at least `n` digits.

#### 2.2.2 Character-String Data Types

These types store text and alphanumeric data. The two primary types are `CHAR` and `VARCHAR`, which have a crucial difference in how they handle storage.

|   |   |
|---|---|
|Data Type|Description|
|`**CHAR(n)**`|A **fixed-length** character string. If the stored string is shorter than the specified length `n`, it is padded with spaces to fill the entire length. For example, storing "Avi" in a `char(10)` field uses 10 characters of storage.|
|`**VARCHAR(n)**`|A **variable-length** character string with a maximum length of `n`. It only uses storage for the characters entered, without adding padding. Storing "Avi" in a `varchar(10)` field uses only 3 characters of storage.|

#### 2.2.3 Date, Time, and Other Standard Types

SQL provides a rich set of data types for handling temporal and other specific kinds of data.

- **Bit-string types**: `BIT(n)` for fixed-length and `BIT VARYING(n)` for variable-length bit strings.
- **Boolean type**: Stores logical values of `TRUE` or `FALSE`.
- `**DATE**` **type**: Stores a date value with YEAR, MONTH, and DAY components in the format `YYYY-MM-DD`.
- `**TIMESTAMP**` **type**: Includes both DATE and TIME components, with optional fractional seconds. It can also include a `WITH TIME ZONE` qualifier to store timezone information.
- `**INTERVAL**` **type**: Represents a relative value that can be used to increment or decrement a date, time, or timestamp.
- `**ENUM**` **type**: A MySQL-specific string object that constrains a column's value to a predefined list of permitted values specified during table creation.
- `**NULL**` **value**: A special marker used to indicate that a data value is absent or unknown. It is not the same as zero or an empty string.

#### 2.2.4 Large-Object (LOB) Data Types

For storing data that exceeds the limits of standard string types, such as images, video clips, or extensive text documents, SQL provides Large-Object (LOB) data types. The two main categories are `CLOB` for character data and `BLOB` for binary data.

|   |   |
|---|---|
|LOB Category|Details|
|**BLOB**|Stands for **Binary Large Object**. It is used for binary files like videos, images, and audio. Data is treated as a binary string, and sorting is based on raw numeric byte values. In MySQL, BLOB types include: `TINYBLOB` (up to 255 bytes), `BLOB` (~64 KB), `MEDIUMBLOB` (~16 MB), and `LONGBLOB` (~4 GB).|
|**CLOB/TEXT**|Stands for **Character Large Object** (`TEXT` is the MySQL equivalent). It is used for long-form textual content. Sorting and comparison follow the rules of the specified character set. Indexing a `TEXT` column requires specifying a prefix length. MySQL `TEXT` types include: `TINYTEXT` (255 characters), `TEXT` (65,535 characters), `MEDIUMTEXT` (16,777,215 characters), and `LONGTEXT` (4,294,967,295 characters).|

### 2.3 Core DDL Commands and Operations

The primary DDL commands are used to create, modify, and remove the core structures of the database.

#### 2.3.1

The `CREATE TABLE` command defines a new table, its columns, and the data type for each column. **Basic Syntax:**

```sql
CREATE TABLE table_name (
    column_name1 datatype,
    column_name2 datatype,
    ...
);
```

You can also create a new table based on an existing one. `CREATE TABLE ... AS SELECT ...` creates a new table and populates it with the data returned by the query. In contrast, `CREATE TABLE ... LIKE ...` creates an empty table with the exact same structure as the original.

#### 2.3.2

The `ALTER TABLE` command is the primary tool for modifying an existing table's structure. Its key functions include:

- Adding a new column (`ADD`).
- Modifying a column's data type or other definitions (`MODIFY`).
- Renaming an existing column (`RENAME COLUMN` or `CHANGE COLUMN`).
- Dropping an existing column (`DROP`).

#### 2.3.3

The `DROP TABLE` command permanently deletes a table, including its structure, data, and associated objects like indexes and constraints. **Syntax:**

```sql
DROP TABLE table_name;
```

#### 2.3.4

The `TRUNCATE TABLE` command removes all rows from a table quickly and efficiently, but it leaves the table structure intact for future use. **Syntax:**

```sql
TRUNCATE TABLE table_name;
```

While both `DROP` and `TRUNCATE` remove data, they have fundamental differences:

|   |   |   |
|---|---|---|
|Feature|DROP|TRUNCATE|
|Removes data|Yes|Yes|
|Removes table structure|Yes (table is deleted)|No (structure remains)|
|Auto_Increment reset|N/A (table is removed)|Resets to 1 (in MySQL)|
|Constraints & Indexes|Deleted along with table|Preserved (only rows deleted)|
|Rollback (MySQL)|Cannot be rolled back|Cannot be rolled back|
|Use case|When the table is no longer needed|When you want to empty the table but keep its structure|

#### 2.3.5 Other DDL-Related Commands

- `**RENAME TABLE**`: Used to change the name of an existing table.
- `**DESCRIBE table_name**`: Provides a summary of a table's structure, including column names, data types, and other attributes.
- `**COMMENT**`: Adds metadata comments to tables and columns, which can be useful for documentation.

Having defined the database structure with DDL, the next step is to implement rules that ensure the data stored within that structure is valid and reliable. This leads to the topic of SQL constraints.

--------------------------------------------------------------------------------

## 3.0 Enforcing Data Integrity with SQL Constraints

### 3.1 The Role and Declaration of Constraints

Constraints are rules enforced on data columns to maintain the accuracy, reliability, and overall integrity of data within a database. They are a critical defense against the entry of invalid data. Constraints can be specified when a table is first created using the `CREATE TABLE` statement or added later to an existing table with the `ALTER TABLE` statement. SQL directly supports the three fundamental constraint types from the relational model:

1. **Key Constraint**: The value of a primary key cannot be duplicated within the table, ensuring each row is unique.
2. **Entity Integrity Constraint**: The value of a primary key cannot be `NULL`, ensuring that every row has a unique identifier.
3. **Referential Integrity Constraints**: A foreign key value must either match an existing primary key value in the referenced table or be `NULL`, which preserves the logical link between related tables.

### 3.2 Attribute-Level Constraints and Clauses

SQL provides several clauses for defining constraints and default behaviors on individual attributes.

- `**NOT NULL**`: This constraint ensures that a column cannot store a `NULL` value. It is implicitly applied to all primary key attributes but can be specified for any column where a value is required.
- `**DEFAULT <value>**`: This clause provides a default value for a column if one is not specified during an `INSERT` operation. If no default is specified, the system default is `NULL` (for columns that permit it).
- `**UNIQUE**`: This constraint ensures that all values in a column (or a set of columns) are distinct from one another. This is used to define an alternate key, also known as a candidate key.
- `**PRIMARY KEY**`: This clause designates the attribute or set of attributes that will uniquely identify each record in a table. A table can have only one primary key.
- `**CHECK**`: This clause creates a custom rule to limit the range of values that can be placed in a column. For example, `CHECK (Dnumber > 0 AND Dnumber < 21)` would ensure the department number is within a valid range.
- `**CONSTRAINT**` **Keyword**: The `CONSTRAINT` keyword can be used to explicitly name a constraint. This practice is highly recommended as it makes it much easier to modify or drop a specific constraint later using the `ALTER TABLE` command.

### 3.3 Managing Relationships with Foreign Keys and Referential Actions

The `FOREIGN KEY` clause is the primary mechanism for establishing and enforcing a link between the data in two tables. It is the cornerstone of referential integrity, ensuring that a relationship between tables remains consistent.

When defining a foreign key, you can also specify **referential triggered actions** that dictate what the database should do if a referenced primary key value is deleted or updated. These actions are defined using the `ON DELETE` and `ON UPDATE` clauses.

|   |   |   |
|---|---|---|
|Action|Description for `ON DELETE`|Description for `ON UPDATE`|
|`**NO ACTION**`|Rejects the delete operation and raises an error if any child rows reference the key being deleted. This is the default behavior.|Rejects the update operation and raises an error if any child rows reference the key being updated.|
|`**CASCADE**`|Deletes all corresponding rows in the child table when the referenced row in the parent table is deleted.|Updates all corresponding foreign key values in the child table when the referenced primary key in the parent table is updated.|
|`**SET NULL**`|Sets the foreign key columns in all corresponding child rows to `NULL`. This action requires the foreign key column to be nullable.|Sets the foreign key columns in all corresponding child rows to `NULL`. This action requires the foreign key column to be nullable.|
|`**SET DEFAULT**`|Sets the foreign key columns in all corresponding child rows to their predefined default values.|Sets the foreign key columns in all corresponding child rows to their predefined default values.|

After defining the database structure and establishing rules to protect its integrity, the final step is to begin working with the data itself.

--------------------------------------------------------------------------------

## 4.0 Managing Data: The Data Manipulation Language (DML)

### 4.1 Introduction to DML Commands

While DDL builds the database structure, the Data Manipulation Language (DML) is used to manage the data within that structure. DML commands are the most frequently used SQL operations in day-to-day database work, covering the insertion of new records, the modification of existing ones, the deletion of outdated data, and the retrieval of information. This section covers the core data modification commands: `INSERT`, `UPDATE`, and `DELETE`.

### 4.2 Adding Data with

The `INSERT` command is used to add new rows (also called tuples) to a table. There are two primary forms of this command.

1. **Form 1: Values in Column Order** This form requires listing the values in the exact same order as the columns were defined in the `CREATE TABLE` statement.
2. **Form 2: Specifying Column Names** This form allows you to explicitly name the columns you are populating. This is particularly useful when you are not providing a value for every column, such as those with default values or that allow `NULL`.

A powerful variation of `INSERT` allows you to populate a table with the results of a `SELECT` query. This is useful for creating copies of data or summarizing information into a new table.

**Example:**

```sql
INSERT INTO WORKS_ON_INFO (Emp_name, Proj_name, Hours_per_week)
SELECT E.Lname, P.Pname, W.Hours
FROM PROJECT P, WORKS_ON W, EMPLOYEE E
WHERE P.Pnumber = W.Pno AND W.Essn = E.Ssn;
```

### 4.3 Modifying Data with

The `UPDATE` command is used to modify existing records in a table. Its syntax includes two key clauses:

- The `SET` clause specifies which columns to change and defines their new values.
- The `WHERE` clause selects which rows to modify. If the `WHERE` clause is omitted, all rows in the table will be updated.

**Example 1: A simple update** This query changes the location and department number for project 10.

```sql
UPDATE PROJECT SET Plocation = 'Bellaire', Dnum = 5 WHERE Pnumber = 10;
```

**Example 2: An update based on a calculation** This query gives a 10% salary raise to all employees in department 5.

```sql
UPDATE EMPLOYEE SET Salary = Salary * 1.1 WHERE Dno = 5;
```

It is worth noting that some database systems, like MySQL, restrict selecting from the same table that is being updated within the same query unless a derived table is used.

### 4.4 Removing Data with

The `DELETE` command is used to remove one or more rows from a table. Its syntax is straightforward and relies heavily on the `WHERE` clause to specify exactly which records should be deleted.

**Syntax:**

```sql
DELETE FROM table_name WHERE condition;
```

The importance of the `WHERE` clause cannot be overstated. If it is omitted, the `DELETE` command will remove **all tuples** in the relation. While this empties the table of its data, the table definition itself remains in the database. To remove the table structure entirely, the `DROP TABLE` command must be used.

--------------------------------------------------------------------------------

### Conclusion

The SQL language is built upon a logical separation of commands, each with a clear purpose. Data Definition Language (DDL) provides the tools to architect the database schema, SQL Constraints enforce the business rules that ensure data integrity, and Data Manipulation Language (DML) provides the means to interact with the data on a daily basis. Understanding the distinct yet interconnected roles of these foundational components is the first and most crucial step toward effective and professional database management and design.